<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employee Store Search</title>
  <script>
    async function handleSubmit(event) {
      event.preventDefault(); // Prevent form submission from reloading the page

      const empname = document.getElementById("empname").value;
      const empphone = document.getElementById("empphone").value;
      const storename = document.getElementById("storename").value;

      const payload = { empname, empphone, storename };

      try {
        const response = await fetch("http://localhost:3000/api/auth/moblogin", { // Backend API endpoint
          method: "POST",
          headers: {
            "Content-Type": "application/json", // Ensure JSON content type
          },
          body: JSON.stringify(payload),
        });

        if (response.ok) {
          const data = await response.json();
          alert("Employee Found: " + JSON.stringify(data.employee));
        } else {
          const error = await response.json();
          alert("Error: " + error.error);
        }
      } catch (err) {
        console.error("An error occurred:", err);
        alert("An error occurred. Please try again later.");
      }
    }
  </script>
</head>
<body>
  <h1>Search Employee in Store</h1>
  <form id="searchForm" onsubmit="handleSubmit(event)">
    <div>
      <label for="empname">Employee Name:</label>
      <input type="text" id="empname" name="empname" required />
    </div>
    <div>
      <label for="empphone">Employee Phone:</label>
      <input type="text" id="empphone" name="empphone" required />
    </div>
    <div>
      <label for="storename">Store Name:</label>
      <input type="text" id="storename" name="storename" required />
    </div>
    <button type="submit">Search</button>
  </form>
</body>
</html>